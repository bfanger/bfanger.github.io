import{S as R,i as U,s as z,k as E,l as S,m as Y,h as k,n as C,p as $,b as I,C as X,A as y,o as Z,G as x,H as ee,N as te,v as H,a as B,w as P,c as F,x as V,K as le,O as re,P as ne,d as T,f as p,t as b,y as M,I as se,Q as G,R as oe,B as ae,D as ie,E as ce,F as ue,g as q,T as fe,e as K}from"../../../chunks/index-2bd1a8eb.js";import{p as _e}from"../../../chunks/stores-d8674f3a.js";import{P as A}from"../../../chunks/ProjectCard-09ac1473.js";const{window:de}=x;function he(n){let e,l=`${n[0]*100}vh`,t,o;return{c(){e=E("div"),this.h()},l(r){e=S(r,"DIV",{class:!0}),Y(e).forEach(k),this.h()},h(){C(e,"class","scroller"),$(e,"height",l,!1)},m(r,s){I(r,e,s),t||(o=X(de,"scroll",n[1]),t=!0)},p(r,[s]){s&1&&l!==(l=`${r[0]*100}vh`)&&$(e,"height",l,!1)},i:y,o:y,d(r){r&&k(e),t=!1,o()}}}function me(n,e,l){let t,{max:o}=e,{value:r}=e;r!==0&&Z(()=>{window.scrollTo(0,document.body.scrollHeight*(r/t))});function s(){const c=window.scrollY/(document.body.offsetHeight-window.innerHeight);l(2,r=c*t)}return n.$$set=c=>{"max"in c&&l(3,o=c.max),"value"in c&&l(2,r=c.value)},n.$$.update=()=>{n.$$.dirty&8&&l(0,t=o)},[t,s,r,o]}class pe extends R{constructor(e){super(),U(this,e,me,he,z,{max:3,value:2})}}function L(n,e,l){const t=n.slice();return t[16]=e[l],t}function ge(n){return{c:y,l:y,m:y,p:y,i:y,o:y,d:y}}function be(n){let e,l,t,o;const r=[ve,ke],s=[];function c(i,m){return i[19]?0:1}return e=c(n),l=s[e]=r[e](n),{c(){l.c(),t=K()},l(i){l.l(i),t=K()},m(i,m){s[e].m(i,m),I(i,t,m),o=!0},p(i,m){let v=e;e=c(i),e===v?s[e].p(i,m):(q(),b(s[v],1,1,()=>{s[v]=null}),T(),l=s[e],l?l.p(i,m):(l=s[e]=r[e](i),l.c()),p(l,1),l.m(t.parentNode,t))},i(i){o||(p(l),o=!0)},o(i){b(l),o=!1},d(i){s[e].d(i),i&&k(t)}}}function ke(n){let e,l;return e=new A({props:{project:D(n[0].teasers[n[16]])}}),{c(){H(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,o){V(e,t,o),l=!0},p(t,o){const r={};o&17&&(r.project=D(t[0].teasers[t[16]])),e.$set(r)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){M(e,t)}}}function ve(n){let e,l;return e=new A({props:{project:n[19]}}),{c(){H(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,o){V(e,t,o),l=!0},p(t,o){const r={};o&24&&(r.project=t[19]),e.$set(r)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){M(e,t)}}}function ye(n){let e,l;return e=new A({props:{project:D(n[0].teasers[n[16]])}}),{c(){H(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,o){V(e,t,o),l=!0},p(t,o){const r={};o&17&&(r.project=D(t[0].teasers[t[16]])),e.$set(r)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){M(e,t)}}}function O(n,e){let l,t,o=`translateY(${(e[1]-e[16])*-100}vh)`,r,s={ctx:e,current:null,token:null,hasCatch:!1,pending:ye,then:be,catch:ge,value:19,blocks:[,,,]};return G(t=e[3][e[16]],s),{key:n,first:null,c(){l=E("div"),s.block.c(),this.h()},l(c){l=S(c,"DIV",{class:!0});var i=Y(l);s.block.l(i),i.forEach(k),this.h()},h(){C(l,"class","item svelte-1dlua8i"),$(l,"transform",o,!1),this.first=l},m(c,i){I(c,l,i),s.block.m(l,s.anchor=null),s.mount=()=>l,s.anchor=null,r=!0},p(c,i){e=c,s.ctx=e,i&24&&t!==(t=e[3][e[16]])&&G(t,s)||oe(s,e,i),i&18&&o!==(o=`translateY(${(e[1]-e[16])*-100}vh)`)&&$(l,"transform",o,!1)},i(c){r||(p(s.block),r=!0)},o(c){for(let i=0;i<3;i+=1){const m=s.blocks[i];b(m)}r=!1},d(c){c&&k(l),s.block.d(),s.token=null,s=null}}}function Q(n){let e,l=`translateY(${(n[1]-n[5])*-100}vh)`,t;const o=n[10].default,r=ae(o,n,n[9],null);return{c(){e=E("div"),r&&r.c(),this.h()},l(s){e=S(s,"DIV",{class:!0});var c=Y(e);r&&r.l(c),c.forEach(k),this.h()},h(){C(e,"class","item svelte-1dlua8i"),$(e,"transform",l,!1)},m(s,c){I(s,e,c),r&&r.m(e,null),t=!0},p(s,c){r&&r.p&&(!t||c&512)&&ie(r,o,s,s[9],t?ue(o,s[9],c,null):ce(s[9]),null),c&2&&l!==(l=`translateY(${(s[1]-s[5])*-100}vh)`)&&$(e,"transform",l,!1)},i(s){t||(p(r,s),t=!0)},o(s){b(r,s),t=!1},d(s){s&&k(e),r&&r.d(s)}}}function we(n){let e,l,t,o,r=[],s=new Map,c,i;function m(a){n[11](a)}let v={max:n[0].teasers.length-1};n[1]!==void 0&&(v.value=n[1]),e=new pe({props:v}),ee.push(()=>te(e,"value",m));let h=n[4];const w=a=>a[16];for(let a=0;a<h.length;a+=1){let u=L(n,h,a),d=w(u);s.set(d,r[a]=O(d,u))}let f=n[5]>n[2]-2&&n[5]<n[2]+2&&Q(n);return{c(){H(e.$$.fragment),t=B(),o=E("div");for(let a=0;a<r.length;a+=1)r[a].c();c=B(),f&&f.c(),this.h()},l(a){P(e.$$.fragment,a),t=F(a),o=S(a,"DIV",{class:!0});var u=Y(o);for(let d=0;d<r.length;d+=1)r[d].l(u);c=F(u),f&&f.l(u),u.forEach(k),this.h()},h(){C(o,"class","viewport svelte-1dlua8i")},m(a,u){V(e,a,u),I(a,t,u),I(a,o,u);for(let d=0;d<r.length;d+=1)r[d].m(o,null);le(o,c),f&&f.m(o,null),i=!0},p(a,[u]){const d={};u&1&&(d.max=a[0].teasers.length-1),!l&&u&2&&(l=!0,d.value=a[1],re(()=>l=!1)),e.$set(d),u&27&&(h=a[4],q(),r=ne(r,u,w,1,a,h,s,o,fe,O,c,L),T()),a[5]>a[2]-2&&a[5]<a[2]+2?f?(f.p(a,u),u&4&&p(f,1)):(f=Q(a),f.c(),p(f,1),f.m(o,null)):f&&(q(),b(f,1,1,()=>{f=null}),T())},i(a){if(!i){p(e.$$.fragment,a);for(let u=0;u<h.length;u+=1)p(r[u]);p(f),i=!0}},o(a){b(e.$$.fragment,a);for(let u=0;u<r.length;u+=1)b(r[u]);b(f),i=!1},d(a){M(e,a),a&&k(t),a&&k(o);for(let u=0;u<r.length;u+=1)r[u].d();f&&f.d()}}}function D(n){return{content:"",released:n.released,slug:n.slug,title:n.title}}function je(n,e,l){let t,o,r,s,c,i;se(n,_e,_=>l(12,i=_));let{$$slots:m={},$$scope:v}=e,{data:h}=e;const w=u(i.params.project),f={};let a=w;function u(_){return h.teasers.findIndex(g=>g.slug===_)}function d(_){const g=u(_);return f[g]||l(3,f[g]=fetch(`/projects/${_}.json`).then(j=>j.json()),f),f[g]}function J(_){const{slug:g}=h.teasers[_],j=`/scrollytelling/${g}`;window.location.pathname!==j&&window.history.pushState({scroll:_},"",`/scrollytelling/${g}`)}function W(_){a=_,l(1,a)}return n.$$set=_=>{"data"in _&&l(0,h=_.data),"$$scope"in _&&l(9,v=_.$$scope)},n.$$.update=()=>{var _,g,j;n.$$.dirty&2&&l(2,t=Math.round(a)),n.$$.dirty&5&&l(8,o=(_=h.teasers[t-1])==null?void 0:_.slug),n.$$.dirty&5&&l(7,r=(g=h.teasers[t])==null?void 0:g.slug),n.$$.dirty&5&&l(6,s=(j=h.teasers[t+1])==null?void 0:j.slug),n.$$.dirty&256&&o&&d(o),n.$$.dirty&128&&r&&d(r),n.$$.dirty&64&&s&&d(s),n.$$.dirty&5&&l(4,c=[t-1,t,t+1].filter(N=>N>=0&&N<h.teasers.length&&N!==w)),n.$$.dirty&4&&J(t)},[h,a,t,f,c,w,s,r,o,v,m,W]}class Ee extends R{constructor(e){super(),U(this,e,je,we,z,{data:0})}}export{Ee as default};
