import{ab as z,v as L,ac as q,ad as x,w as B,ae as M,af as P,ag as U,ah as j,z as G,n as T,ai as S,y as K}from"./lWxA7woT.js";import{a as W}from"./DIoBXm32.js";const D=()=>performance.now(),c={tick:t=>requestAnimationFrame(t),now:()=>D(),tasks:new Set};function g(){const t=c.now();c.tasks.forEach(r=>{r.c(t)||(c.tasks.delete(r),r.f())}),c.tasks.size!==0&&c.tick(g)}function H(t){let r;return c.tasks.size===0&&c.tick(g),{promise:new Promise(a=>{c.tasks.add(r={c:t,f:a})}),abort(){c.tasks.delete(r)}}}function N(t,r){S(()=>{t.dispatchEvent(new CustomEvent(r))})}function J(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const r=t.split("-");return r.length===1?r[0]:r[0]+r.slice(1).map(a=>a[0].toUpperCase()+a.slice(1)).join("")}function F(t){const r={},a=t.split(";");for(const i of a){const[n,s]=i.split(":");if(!n||s===void 0)break;const f=J(n.trim());r[f]=s.trim()}return r}const Q=t=>t;function Y(t,r,a,i){var n=(t&P)!==0,s=(t&U)!==0,f=n&&s,l=(t&M)!==0,A=f?"both":n?"in":"out",v,d=r.inert,m=r.style.overflow,u,p;function h(){return S(()=>v??=a()(r,i?.()??{},{direction:A}))}var e={is_global:l,in(){if(r.inert=d,!n){p?.abort(),p?.reset?.();return}s||u?.abort(),u=y(r,h(),p,1,()=>{N(r,"introend"),u?.abort(),u=v=void 0,r.style.overflow=m})},out(k){if(!s){k?.(),v=void 0;return}r.inert=!0,p=y(r,h(),u,0,()=>{N(r,"outroend"),k?.()})},stop:()=>{u?.abort(),p?.abort()}},_=z;if((_.nodes.t??=[]).push(e),n&&W){var w=l;if(!w){for(var o=_.parent;o&&(o.f&L)!==0;)for(;(o=o.parent)&&(o.f&q)===0;);w=!o||(o.f&x)!==0}w&&B(()=>{K(()=>e.in())})}}function y(t,r,a,i,n){var s=i===1;if(j(r)){var f,l=!1;return G(()=>{if(!l){var _=r({direction:s?"in":"out"});f=y(t,_,a,i,n)}}),{abort:()=>{l=!0,f?.abort()},deactivate:()=>f.deactivate(),reset:()=>f.reset(),t:()=>f.t()}}if(a?.deactivate(),!r?.duration&&!r?.delay)return N(t,s?"introstart":"outrostart"),n(),{abort:T,deactivate:T,reset:T,t:()=>i};const{delay:A=0,css:v,tick:d,easing:m=Q}=r;var u=[];if(s&&a===void 0&&(d&&d(0,1),v)){var p=F(v(0,1));u.push(p,p)}var h=()=>1-i,e=t.animate(u,{duration:A,fill:"forwards"});return e.onfinish=()=>{e.cancel(),N(t,s?"introstart":"outrostart");var _=a?.t()??1-i;a?.abort();var w=i-_,o=r.duration*Math.abs(w),k=[];if(o>0){var I=!1;if(v)for(var O=Math.ceil(o/16.666666666666668),E=0;E<=O;E+=1){var R=_+w*m(E/O),C=F(v(R,1-R));k.push(C),I||=C.overflow==="hidden"}I&&(t.style.overflow="hidden"),h=()=>{var b=e.currentTime;return _+w*m(b/o)},d&&H(()=>{if(e.playState!=="running")return!1;var b=h();return d(b,1-b),!0})}e=t.animate(k,{duration:o,fill:"forwards"}),e.onfinish=()=>{h=()=>i,d?.(i,1-i),n()}},{abort:()=>{e&&(e.cancel(),e.effect=null,e.onfinish=T)},deactivate:()=>{n=T},reset:()=>{i===0&&d?.(1,0)},t:()=>h()}}export{H as l,c as r,Y as t};
