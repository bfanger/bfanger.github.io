import{B as ze,c as I,a as x,f as G,t as ye}from"../chunks/C7vPwiVw.js";import{h as D,m as Se,d as je,b0 as $,v as ke,k as Ie,w as Ae,j as R,T as Pe,U as F,D as ee,b1 as qe,aC as De,b2 as Ne,b3 as Te,al as Be,ai as Ee,a2 as le,Z as ce,aA as Oe,b4 as Ce,_ as Me,p as B,f as j,a as E,g as n,a8 as ue,a$ as re,s as T,t as X,a9 as de,c as L,r as W,ap as te,X as N,u as w,aq as Re,n as Fe}from"../chunks/KOfggb17.js";import{s as J}from"../chunks/CQBYNMoQ.js";import{p as He,f as se,g as Ue,j as Ye,d as Le}from"../chunks/C3skos6l.js";import{i as Z}from"../chunks/DAAn70ST.js";import{e as We,r as Ze}from"../chunks/Db3Bw9NB.js";import{a as fe,s as ve}from"../chunks/Dg9F9NY3.js";import{t as H}from"../chunks/De0iLp5-.js";import{p as Ge}from"../chunks/BeOfDxjR.js";import{P as U}from"../chunks/D0QaKqA8.js";import{o as Xe}from"../chunks/jU8NzD1q.js";import{w as me}from"../chunks/Q5WtAL2i.js";import{c as Je,N as Ke,b as Qe,d as Ve,a as $e}from"../chunks/BSJQzT_m.js";import{r as er}from"../chunks/Mg1gy6Yc.js";const ae=0,Y=1;function rr(s,e,r,t,i){D&&Se();var v=Ee,d=ee(v),m=ee(v),f=new ze(s);je(()=>{var a=e(),g=!1;let _=D&&$(a)===(s.data===ke);if(_&&(Ie(Ae()),R(!1)),$(a)){var z=qe(),l=!1;const u=h=>{if(!g){l=!0,z(!1),De.ensure(),D&&R(!1);try{h()}finally{Ne(),Te||Be()}}};a.then(h=>{u(()=>{F(d,h),f.ensure(Y,t&&(c=>t(c,d)))})},h=>{u(()=>{if(F(m,h),f.ensure(Y,i&&(c=>i(c,m))),!i)throw m.v})}),D?f.ensure(ae,r):Pe(()=>{l||u(()=>{f.ensure(ae,r)})})}else F(d,a),f.ensure(Y,t&&(u=>t(u,d)));return _&&R(!0),()=>{g=!0}})}function tr(s,e,r){le(()=>{var t=ce(()=>e(s,r?.())||{});if(r&&t?.update){var i=!1,v={};Oe(()=>{var d=r();Ce(d),i&&Me(v,d)&&(v=d,t.update(d))}),i=!0}if(t?.destroy)return()=>t.destroy()})}class K{#e=new WeakMap;#r;#t;static entries=new WeakMap;constructor(e){this.#t=e}observe(e,r){var t=this.#e.get(e)||new Set;return t.add(r),this.#e.set(e,t),this.#s().observe(e,this.#t),()=>{var i=this.#e.get(e);i.delete(r),i.size===0&&(this.#e.delete(e),this.#r.unobserve(e))}}#s(){return this.#r??(this.#r=new ResizeObserver(e=>{for(var r of e){K.entries.set(r.target,r);for(var t of this.#e.get(r.target)||[])t(r)}}))}}var sr=new K({box:"border-box"});function ar(s,e,r){var t=sr.observe(s,()=>r(s[e]));le(()=>(ce(()=>r(s[e])),t))}var nr=G('<div class="scroller svelte-1k9wlrq"></div> <div class="size svelte-1k9wlrq"></div>',1);function ir(s,e){B(e,!0);let r=He(e,"value",15),t=ue(0);r()!==0&&Xe(()=>{window.scrollTo(0,n(t)*r())});function i(){const u=window.scrollY/(n(t)*e.max);r(u*e.max)}let v=Date.now(),d=r(),m;function f(){i(),d!==r()?(v=Date.now(),d=r(),m=requestAnimationFrame(f)):Date.now()-v<1e3?m=requestAnimationFrame(f):m=void 0}function a(){v=Date.now(),i(),m||(m=requestAnimationFrame(f))}function g(){i(),m&&(cancelAnimationFrame(m),m=void 0)}var _=I();se("scroll",re,a),se("scrollend",re,g);var z=j(_);{var l=u=>{var h=nr(),c=j(h);let S;var y=T(c,2);X(()=>S=fe(c,"",S,{height:`${e.max*100}svh`})),ar(y,"clientHeight",O=>de(t,O)),x(u,h)};Z(z,u=>{u(l)})}x(s,_),E()}function or(s,e){let r=ne(e),t,i,v=!0;function d({box:f}){t=new ResizeObserver(([a])=>{let g;f==="border-box"?g=a.borderBoxSize:f==="device-pixel-content-box"?g=a.devicePixelContentBoxSize:g=a.contentBoxSize,r.set(Array.isArray(g)?g[0]:g),v=!1}),t.observe(s,{box:f}),i=r.subscribe(a=>{v||s.dispatchEvent(new CustomEvent("has-resized",{detail:a}))})}function m(){t.disconnect(),i()}return d(ie(e)),{update(f){v=!0,r=ne(f),m(),d(ie(f))},destroy(){m()}}}function ne(s){if(typeof s=="object"){if(s.subscribe)return s;if(s.store)return s.store}return me({inlineSize:0,blockSize:0})}function ie(s){if(typeof s>"u"||s.subscribe)return{};const{store:e,...r}=s;return r}var lr=G("<div><!></div>");function oe(s,e){B(e,!0);const r=()=>Ue(d,"$size",t),[t,i]=Ye(),v=16,d=me({inlineSize:0,blockSize:0});function m(l,u){const h=window.innerHeight,c=h/2;if(l>1)return-u;if(l<-1)return h;if(l>.5){const y=(l-.5)*2;return-u+c-c*y}if(l<-.5){const y=(l+1.5)*2-1;return h-c*y}const S=l+.5;return c-u*S}function f(l,u){if(u===0)return"";let h=1;if(l>.75&&l<1){const c=(l-.75)*4;h=1-c*c*.2}if(l<-.5&&l>-1){const c=(l+.5)*-2;h=1-c*c*.3}return`translateY(${m(l,u+v)}px) scale(${h})`}var a=lr();let g,_;var z=L(a);J(z,()=>e.children),W(a),tr(a,(l,u)=>or?.(l,u),()=>d),X(l=>{g=ve(a,1,"item svelte-65plo",null,g,{ssr:!1}),_=fe(a,"",_,l)},[()=>({transform:f(e.scroll,r().blockSize)})]),x(s,a),E(),i()}var cr=G('<!> <div><!> <!></div> <div class="previous svelte-1l59ohf"><!></div>',1);function ur(s,e){B(e,!0);const r=v(Ge.params.project??""),t=te({});let i=ue(te(r));function v(o){return e.teasers.findIndex(b=>b.slug===o)}function d(o){const b=v(o);return t[b]||(t[b]=fetch(`/projects/${o}.json`).then(p=>p.json())),t[b]}function m(o){const{slug:b}=e.teasers[o],p=`/projects/${b}`;window.location.pathname!==p&&er(Ze("/projects/[project]",{project:b}),{scroll:o})}function f(o){return{content:"",released:o.released,slug:o.slug,title:o.title}}let a=w(()=>Math.round(n(i))),g=w(()=>e.teasers[n(a)-1]),_=w(()=>e.teasers[n(a)]),z=w(()=>e.teasers[n(a)+1]);N(()=>{n(_)&&d(n(_).slug)}),N(()=>{n(z)&&d(n(z).slug)}),N(()=>{n(g)&&d(n(g).slug)});let l=w(()=>[n(a)-1,n(a),n(a)+1].filter(o=>o>=0&&o<e.teasers.length&&o!==r));N(()=>{m(n(a))});var u=cr(),h=j(u);ir(h,{get max(){return e.teasers.length},get value(){return n(i)},set value(o){de(i,o,!0)}});var c=T(h,2);let S;var y=L(c);We(y,16,()=>n(l),o=>o,(o,b)=>{{let p=w(()=>n(i)-b);oe(o,{get scroll(){return n(p)},children:(Q,C)=>{var P=I(),be=j(P);rr(be,()=>t[b],M=>{{let q=w(()=>f(e.teasers[b]));U(M,{get project(){return n(q)}})}},(M,q)=>{var V=I(),_e=j(V);{var pe=k=>{U(k,{get project(){return n(q)}})},we=k=>{{let xe=w(()=>f(e.teasers[b]));U(k,{get project(){return n(xe)}})}};Z(_e,k=>{n(q)?k(pe):k(we,!1)})}x(M,V)}),x(Q,P)},$$slots:{default:!0}})}});var O=T(y,2);{var he=o=>{{let b=w(()=>n(i)-r);oe(o,{get scroll(){return n(b)},children:(p,Q)=>{var C=I(),P=j(C);J(P,()=>e.children),x(p,C)},$$slots:{default:!0}})}};Z(O,o=>{r>n(a)-2&&r<n(a)+2&&o(he)})}W(c);var A=T(c,2);A.__mousedown=()=>{Je.set("right")};var ge=L(A);Ke(ge,{href:"/portfolio",type:"previous",children:(o,b)=>{Re();var p=ye("Portfolio");x(o,p)},$$slots:{default:!0}}),W(A),X(()=>S=ve(c,1,"viewport svelte-1l59ohf",null,S,{ssr:!1})),H(5,c,()=>Qe,()=>({})),H(6,c,()=>Ve,()=>({})),H(6,A,()=>$e,()=>({duration:200})),x(s,u),E()}Le(["mousedown"]);function jr(s,e){B(e,!0),ur(s,{get teasers(){return e.data.teasers},children:(r,t)=>{var i=I(),v=j(i);J(v,()=>e.children??Fe),x(r,i)},$$slots:{default:!0}}),E()}export{jr as component};
