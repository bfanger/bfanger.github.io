import{p as ae,q as ue,v as E,w as fe,s as D,a as N,x as _e,u as R,g as Y,b as L,c as ne,n as w,o as de,e as me,y as pe}from"../chunks/scheduler.173kFitQ.js";import{A as M,b,y as P,t as g,S as O,i as V,j as T,l as U,n as F,e as v,u as G,z as A,g as y,C as he,M as ge,c as j,s as K,a as S,f as Q,m as z,p as be,d as I,x as q}from"../chunks/index.vzDccf9I.js";import{e as W,u as $e,o as ke}from"../chunks/each.hABJlW-W.js";import{w as se}from"../chunks/index.dmRs5-03.js";import{p as ve}from"../chunks/stores.o2U7nAGI.js";import{g as we}from"../chunks/globals.0cDDIVm6.js";import{P as J}from"../chunks/ProjectCard.YO7-cnuO.js";function X(r,e){const s=e.token={};function t(l,n,o,i){if(e.token!==s)return;e.resolved=i;let c=e.ctx;o!==void 0&&(c=c.slice(),c[o]=i);const _=l&&(e.current=l)(c);let d=!1;e.block&&(e.blocks?e.blocks.forEach((h,k)=>{k!==n&&h&&(M(),b(h,1,1,()=>{e.blocks[k]===h&&(e.blocks[k]=null)}),P())}):e.block.d(1),_.c(),g(_,1),_.m(e.mount(),e.anchor),d=!0),e.block=_,e.blocks&&(e.blocks[n]=_),d&&fe()}if(ae(r)){const l=ue();if(r.then(n=>{E(l),t(e.then,1,e.value,n),E(null)},n=>{if(E(l),t(e.catch,2,e.error,n),E(null),!e.hasCatch)throw n}),e.current!==e.pending)return t(e.pending,0),!0}else{if(e.current!==e.then)return t(e.then,1,e.value,r),!0;e.resolved=r}}function ye(r,e,s){const t=e.slice(),{resolved:l}=r;r.current===r.then&&(t[r.value]=l),r.current===r.catch&&(t[r.error]=l),r.block.p(t,s)}function je(r,e){let s=Z(e),t,l,n=!0;function o({box:c}){t=new ResizeObserver(([_])=>{let d;c==="border-box"?d=_.borderBoxSize:c==="device-pixel-content-box"?d=_.devicePixelContentBoxSize:d=_.contentBoxSize,s.set(Array.isArray(d)?d[0]:d),n=!1}),t.observe(r,{box:c}),l=s.subscribe(_=>{n||r.dispatchEvent(new CustomEvent("has-resized",{detail:_}))})}function i(){t.disconnect(),l()}return o(x(e)),{update(c){n=!0,s=Z(c),i(),o(x(c))},destroy(){i()}}}function Z(r){if(typeof r=="object"){if(r.subscribe)return r;if(r.store)return r.store}return se({inlineSize:0,blockSize:0})}function x(r){if(typeof r>"u"||r.subscribe)return{};const{store:e,...s}=r;return s}function Se(r){let e,s,t,l;const n=r[4].default,o=N(n,r,r[3],null);return{c(){e=T("div"),o&&o.c(),this.h()},l(i){e=U(i,"DIV",{class:!0});var c=F(e);o&&o.l(c),c.forEach(v),this.h()},h(){G(e,"class","item svelte-qqcwqq"),A(e,"transform",ee(r[0],r[1].blockSize))},m(i,c){y(i,e,c),o&&o.m(e,null),s=!0,t||(l=_e(je.call(null,e,r[2])),t=!0)},p(i,[c]){o&&o.p&&(!s||c&8)&&R(o,n,i,i[3],s?L(n,i[3],c,null):Y(i[3]),null),c&3&&A(e,"transform",ee(i[0],i[1].blockSize))},i(i){s||(g(o,i),s=!0)},o(i){b(o,i),s=!1},d(i){i&&v(e),o&&o.d(i),t=!1,l()}}}const ze=16;function Ie(r,e){const s=window.innerHeight,t=s/2;if(r>1)return-e;if(r<-1)return s;if(r>.5){const n=(r-.5)*2;return-e+t-t*n}if(r<-.5){const n=(r+1.5)*2-1;return s-t*n}const l=r+.5;return t-e*l}function ee(r,e){if(e===0)return"";let s=1;if(r>.75&&r<1){const t=(r-.75)*4;s=1-t*t*.2}if(r<-.5&&r>-1){const t=(r+.5)*-2;s=1-t*t*.3}return`translateY(${Ie(r,e+ze)}px) scale(${s})`}function Ce(r,e,s){let t,{$$slots:l={},$$scope:n}=e,{scroll:o}=e;const i=se({inlineSize:0,blockSize:0});return ne(r,i,c=>s(1,t=c)),r.$$set=c=>{"scroll"in c&&s(0,o=c.scroll),"$$scope"in c&&s(3,n=c.$$scope)},[o,t,i,n,l]}class oe extends O{constructor(e){super(),V(this,e,Ce,Se,D,{scroll:0})}}const{window:qe}=we;function Ee(r){let e,s=`${r[0]*100}vh`,t,l;return{c(){e=T("div"),this.h()},l(n){e=U(n,"DIV",{class:!0}),F(e).forEach(v),this.h()},h(){G(e,"class","scroller"),A(e,"height",s)},m(n,o){y(n,e,o),t||(l=he(qe,"scroll",r[1]),t=!0)},p(n,[o]){o&1&&s!==(s=`${n[0]*100}vh`)&&A(e,"height",s)},i:w,o:w,d(n){n&&v(e),t=!1,l()}}}function Me(r,e,s){let t,{max:l}=e,{value:n}=e;n!==0&&de(()=>{window.scrollTo(0,document.body.scrollHeight*(n/t))});function o(){const i=window.scrollY/(document.body.offsetHeight-window.innerHeight);s(2,n=i*t)}return r.$$set=i=>{"max"in i&&s(3,l=i.max),"value"in i&&s(2,n=i.value)},r.$$.update=()=>{r.$$.dirty&8&&s(0,t=l)},[t,o,n,l]}class Pe extends O{constructor(e){super(),V(this,e,Me,Ee,D,{max:3,value:2})}}function te(r,e,s){const t=r.slice();return t[16]=e[s],t}function Ae(r){return{c:w,l:w,m:w,p:w,i:w,o:w,d:w}}function Be(r){let e,s,t,l;const n=[Oe,De],o=[];function i(c,_){return c[19]?0:1}return e=i(r),s=o[e]=n[e](r),{c(){s.c(),t=q()},l(c){s.l(c),t=q()},m(c,_){o[e].m(c,_),y(c,t,_),l=!0},p(c,_){let d=e;e=i(c),e===d?o[e].p(c,_):(M(),b(o[d],1,1,()=>{o[d]=null}),P(),s=o[e],s?s.p(c,_):(s=o[e]=n[e](c),s.c()),g(s,1),s.m(t.parentNode,t))},i(c){l||(g(s),l=!0)},o(c){b(s),l=!1},d(c){c&&v(t),o[e].d(c)}}}function De(r){let e,s;return e=new J({props:{project:B(r[0][r[16]])}}),{c(){j(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,l){z(e,t,l),s=!0},p(t,l){const n={};l&17&&(n.project=B(t[0][t[16]])),e.$set(n)},i(t){s||(g(e.$$.fragment,t),s=!0)},o(t){b(e.$$.fragment,t),s=!1},d(t){I(e,t)}}}function Oe(r){let e,s;return e=new J({props:{project:r[19]}}),{c(){j(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,l){z(e,t,l),s=!0},p(t,l){const n={};l&24&&(n.project=t[19]),e.$set(n)},i(t){s||(g(e.$$.fragment,t),s=!0)},o(t){b(e.$$.fragment,t),s=!1},d(t){I(e,t)}}}function Ve(r){let e,s;return e=new J({props:{project:B(r[0][r[16]])}}),{c(){j(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,l){z(e,t,l),s=!0},p(t,l){const n={};l&17&&(n.project=B(t[0][t[16]])),e.$set(n)},i(t){s||(g(e.$$.fragment,t),s=!0)},o(t){b(e.$$.fragment,t),s=!1},d(t){I(e,t)}}}function He(r){let e,s,t,l={ctx:r,current:null,token:null,hasCatch:!1,pending:Ve,then:Be,catch:Ae,value:19,blocks:[,,,]};return X(s=r[3][r[16]],l),{c(){e=q(),l.block.c()},l(n){e=q(),l.block.l(n)},m(n,o){y(n,e,o),l.block.m(n,l.anchor=o),l.mount=()=>e.parentNode,l.anchor=e,t=!0},p(n,o){r=n,l.ctx=r,o&24&&s!==(s=r[3][r[16]])&&X(s,l)||ye(l,r,o)},i(n){t||(g(l.block),t=!0)},o(n){for(let o=0;o<3;o+=1){const i=l.blocks[o];b(i)}t=!1},d(n){n&&v(e),l.block.d(n),l.token=null,l=null}}}function re(r,e){let s,t,l;return t=new oe({props:{scroll:e[1]-e[16],$$slots:{default:[He]},$$scope:{ctx:e}}}),{key:r,first:null,c(){s=q(),j(t.$$.fragment),this.h()},l(n){s=q(),S(t.$$.fragment,n),this.h()},h(){this.first=s},m(n,o){y(n,s,o),z(t,n,o),l=!0},p(n,o){e=n;const i={};o&18&&(i.scroll=e[1]-e[16]),o&2073&&(i.$$scope={dirty:o,ctx:e}),t.$set(i)},i(n){l||(g(t.$$.fragment,n),l=!0)},o(n){b(t.$$.fragment,n),l=!1},d(n){n&&v(s),I(t,n)}}}function le(r){let e,s;return e=new oe({props:{scroll:r[1]-r[5],$$slots:{default:[Ne]},$$scope:{ctx:r}}}),{c(){j(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,l){z(e,t,l),s=!0},p(t,l){const n={};l&2&&(n.scroll=t[1]-t[5]),l&2048&&(n.$$scope={dirty:l,ctx:t}),e.$set(n)},i(t){s||(g(e.$$.fragment,t),s=!0)},o(t){b(e.$$.fragment,t),s=!1},d(t){I(e,t)}}}function Ne(r){let e;const s=r[9].default,t=N(s,r,r[11],null);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,n){t&&t.m(l,n),e=!0},p(l,n){t&&t.p&&(!e||n&2048)&&R(t,s,l,l[11],e?L(s,l[11],n,null):Y(l[11]),null)},i(l){e||(g(t,l),e=!0)},o(l){b(t,l),e=!1},d(l){t&&t.d(l)}}}function Re(r){let e,s,t,l,n=[],o=new Map,i,c;function _(a){r[10](a)}let d={max:r[0].length-1};r[1]!==void 0&&(d.value=r[1]),e=new Pe({props:d}),me.push(()=>ge(e,"value",_));let h=W(r[4]);const k=a=>a[16];for(let a=0;a<h.length;a+=1){let u=te(r,h,a),m=k(u);o.set(m,n[a]=re(m,u))}let f=r[5]>r[2]-2&&r[5]<r[2]+2&&le(r);return{c(){j(e.$$.fragment),t=K(),l=T("div");for(let a=0;a<n.length;a+=1)n[a].c();i=K(),f&&f.c(),this.h()},l(a){S(e.$$.fragment,a),t=Q(a),l=U(a,"DIV",{class:!0});var u=F(l);for(let m=0;m<n.length;m+=1)n[m].l(u);i=Q(u),f&&f.l(u),u.forEach(v),this.h()},h(){G(l,"class","viewport svelte-d5sas8")},m(a,u){z(e,a,u),y(a,t,u),y(a,l,u);for(let m=0;m<n.length;m+=1)n[m]&&n[m].m(l,null);be(l,i),f&&f.m(l,null),c=!0},p(a,[u]){const m={};u&1&&(m.max=a[0].length-1),!s&&u&2&&(s=!0,m.value=a[1],pe(()=>s=!1)),e.$set(m),u&27&&(h=W(a[4]),M(),n=$e(n,u,k,1,a,h,o,l,ke,re,i,te),P()),a[5]>a[2]-2&&a[5]<a[2]+2?f?(f.p(a,u),u&4&&g(f,1)):(f=le(a),f.c(),g(f,1),f.m(l,null)):f&&(M(),b(f,1,1,()=>{f=null}),P())},i(a){if(!c){g(e.$$.fragment,a);for(let u=0;u<h.length;u+=1)g(n[u]);g(f),c=!0}},o(a){b(e.$$.fragment,a);for(let u=0;u<n.length;u+=1)b(n[u]);b(f),c=!1},d(a){a&&(v(t),v(l)),I(e,a);for(let u=0;u<n.length;u+=1)n[u].d();f&&f.d()}}}function B(r){return{content:"",released:r.released,slug:r.slug,title:r.title}}function Ye(r,e,s){let t,l,n,o,i,c;ne(r,ve,p=>s(12,c=p));let{$$slots:_={},$$scope:d}=e,{teasers:h}=e;const k=u(c.params.project),f={};let a=k;function u(p){return h.findIndex($=>$.slug===p)}function m(p){const $=u(p);return f[$]||s(3,f[$]=fetch(`/projects/${p}.json`).then(C=>C.json()),f),f[$]}function ce(p){const{slug:$}=h[p],C=`/scrollytelling/${$}`;window.location.pathname!==C&&window.history.pushState({scroll:p},"",`/scrollytelling/${$}`)}function ie(p){a=p,s(1,a)}return r.$$set=p=>{"teasers"in p&&s(0,h=p.teasers),"$$scope"in p&&s(11,d=p.$$scope)},r.$$.update=()=>{var p,$,C;r.$$.dirty&2&&s(2,t=Math.round(a)),r.$$.dirty&5&&s(8,l=(p=h[t-1])==null?void 0:p.slug),r.$$.dirty&5&&s(7,n=($=h[t])==null?void 0:$.slug),r.$$.dirty&5&&s(6,o=(C=h[t+1])==null?void 0:C.slug),r.$$.dirty&256&&l&&m(l),r.$$.dirty&128&&n&&m(n),r.$$.dirty&64&&o&&m(o),r.$$.dirty&5&&s(4,i=[t-1,t,t+1].filter(H=>H>=0&&H<h.length&&H!==k)),r.$$.dirty&4&&ce(t)},[h,a,t,f,i,k,o,n,l,_,ie,d]}class Le extends O{constructor(e){super(),V(this,e,Ye,Re,D,{teasers:0})}}function Te(r){let e;const s=r[1].default,t=N(s,r,r[2],null);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,n){t&&t.m(l,n),e=!0},p(l,n){t&&t.p&&(!e||n&4)&&R(t,s,l,l[2],e?L(s,l[2],n,null):Y(l[2]),null)},i(l){e||(g(t,l),e=!0)},o(l){b(t,l),e=!1},d(l){t&&t.d(l)}}}function Ue(r){let e,s;return e=new Le({props:{teasers:r[0].teasers,$$slots:{default:[Te]},$$scope:{ctx:r}}}),{c(){j(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,l){z(e,t,l),s=!0},p(t,[l]){const n={};l&1&&(n.teasers=t[0].teasers),l&4&&(n.$$scope={dirty:l,ctx:t}),e.$set(n)},i(t){s||(g(e.$$.fragment,t),s=!0)},o(t){b(e.$$.fragment,t),s=!1},d(t){I(e,t)}}}function Fe(r,e,s){let{$$slots:t={},$$scope:l}=e,{data:n}=e;return r.$$set=o=>{"data"in o&&s(0,n=o.data),"$$scope"in o&&s(2,l=o.$$scope)},[n,t,l]}class xe extends O{constructor(e){super(),V(this,e,Fe,Ue,D,{data:0})}}export{xe as component};
