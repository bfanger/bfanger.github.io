import{B as Ee,c as E,a as b,f as V,t as Oe}from"../chunks/C7vPwiVw.js";import{h as C,m as Ne,d as Te,b0 as ne,v as Ce,k as De,w as Re,j as Y,T as Be,U as $,D as oe,b1 as Fe,aC as He,b2 as Me,b3 as Ue,al as We,ai as Ye,a2 as we,Z as be,aA as $e,b4 as Le,_ as Ze,p as F,f as P,a as H,g as o,a8 as A,a$ as ie,s as R,t as ee,a9 as j,c as K,r as X,an as Ge,ao as ce,ap as le,X as D,u as w,aq as Ke,n as Xe}from"../chunks/KOfggb17.js";import{s as te}from"../chunks/CQBYNMoQ.js";import{p as Je,f as ue,g as Qe,j as Ve,d as et}from"../chunks/C3skos6l.js";import{i as J}from"../chunks/DAAn70ST.js";import{e as tt,r as rt}from"../chunks/C9goNKa9.js";import{a as ye,s as ke}from"../chunks/Dg9F9NY3.js";import{t as L}from"../chunks/De0iLp5-.js";import{p as st}from"../chunks/CqZn4eFg.js";import{P as Z}from"../chunks/D0QaKqA8.js";import{o as at}from"../chunks/jU8NzD1q.js";import{w as xe}from"../chunks/Q5WtAL2i.js";import{c as nt,N as ot,b as it,d as ct,a as lt}from"../chunks/BSJQzT_m.js";import{b as ut,a as ft}from"../chunks/Cn40e1wm.js";import{a as dt,b as B,q as x,c as vt,r as Q,g as ht,v as mt,d as pt,e as fe,f as _t}from"../chunks/DbVFc5cH.js";import{H as de,R as gt}from"../chunks/Djzs_vta.js";const ve=0,G=1;function wt(r,e,t,a,s){C&&Ne();var n=Ye,c=oe(n),u=oe(n),f=new Ee(r);Te(()=>{var i=e(),p=!1;let g=C&&ne(i)===(r.data===Ce);if(g&&(De(Re()),Y(!1)),ne(i)){var y=Fe(),d=!1;const h=m=>{if(!p){d=!0,y(!1),He.ensure(),C&&Y(!1);try{m()}finally{Me(),Ue||We()}}};i.then(m=>{h(()=>{$(c,m),f.ensure(G,a&&(v=>a(v,c)))})},m=>{h(()=>{if($(u,m),f.ensure(G,s&&(v=>s(v,u))),!s)throw u.v})}),C?f.ensure(ve,t):Be(()=>{d||h(()=>{f.ensure(ve,t)})})}else $(c,i),f.ensure(G,a&&(h=>a(h,c)));return g&&Y(!0),()=>{p=!0}})}function bt(r,e,t){we(()=>{var a=be(()=>e(r,t?.())||{});if(t&&a?.update){var s=!1,n={};$e(()=>{var c=t();Le(c),s&&Ze(n,c)&&(n=c,a.update(c))}),s=!0}if(a?.destroy)return()=>a.destroy()})}class re{#e=new WeakMap;#t;#r;static entries=new WeakMap;constructor(e){this.#r=e}observe(e,t){var a=this.#e.get(e)||new Set;return a.add(t),this.#e.set(e,a),this.#s().observe(e,this.#r),()=>{var s=this.#e.get(e);s.delete(t),s.size===0&&(this.#e.delete(e),this.#t.unobserve(e))}}#s(){return this.#t??(this.#t=new ResizeObserver(e=>{for(var t of e){re.entries.set(t.target,t);for(var a of this.#e.get(t.target)||[])a(t)}}))}}var yt=new re({box:"border-box"});function kt(r,e,t){var a=yt.observe(r,()=>t(r[e]));we(()=>(be(()=>t(r[e])),a))}var xt=V('<div class="scroller svelte-1k9wlrq"></div> <div class="size svelte-1k9wlrq"></div>',1);function zt(r,e){F(e,!0);let t=Je(e,"value",15),a=A(0);t()!==0&&at(()=>{window.scrollTo(0,o(a)*t())});function s(){const h=window.scrollY/(o(a)*e.max);t(h*e.max)}let n=Date.now(),c=t(),u;function f(){s(),c!==t()?(n=Date.now(),c=t(),u=requestAnimationFrame(f)):Date.now()-n<1e3?u=requestAnimationFrame(f):u=void 0}function i(){n=Date.now(),s(),u||(u=requestAnimationFrame(f))}function p(){s(),u&&(cancelAnimationFrame(u),u=void 0)}var g=E();ue("scroll",ie,i),ue("scrollend",ie,p);var y=P(g);{var d=h=>{var m=xt(),v=P(m);let z;var k=R(v,2);ee(()=>z=ye(v,"",z,{height:`${e.max*100}svh`})),kt(k,"clientHeight",M=>j(a,M)),b(h,m)};J(y,h=>{h(d)})}b(r,g),H()}function St(r,e){let t=he(e),a,s,n=!0;function c({box:f}){a=new ResizeObserver(([i])=>{let p;f==="border-box"?p=i.borderBoxSize:f==="device-pixel-content-box"?p=i.devicePixelContentBoxSize:p=i.contentBoxSize,t.set(Array.isArray(p)?p[0]:p),n=!1}),a.observe(r,{box:f}),s=t.subscribe(i=>{n||r.dispatchEvent(new CustomEvent("has-resized",{detail:i}))})}function u(){a.disconnect(),s()}return c(me(e)),{update(f){n=!0,t=he(f),u(),c(me(f))},destroy(){u()}}}function he(r){if(typeof r=="object"){if(r.subscribe)return r;if(r.store)return r.store}return xe({inlineSize:0,blockSize:0})}function me(r){if(typeof r>"u"||r.subscribe)return{};const{store:e,...t}=r;return t}var jt=V("<div><!></div>");function pe(r,e){F(e,!0);const t=()=>Qe(c,"$size",a),[a,s]=Ve(),n=16,c=xe({inlineSize:0,blockSize:0});function u(d,h){const m=window.innerHeight,v=m/2;if(d>1)return-h;if(d<-1)return m;if(d>.5){const k=(d-.5)*2;return-h+v-v*k}if(d<-.5){const k=(d+1.5)*2-1;return m-v*k}const z=d+.5;return v-h*z}function f(d,h){if(h===0)return"";let m=1;if(d>.75&&d<1){const v=(d-.75)*4;m=1-v*v*.2}if(d<-.5&&d>-1){const v=(d+.5)*-2;m=1-v*v*.3}return`translateY(${u(d,h+n)}px) scale(${m})`}var i=jt();let p,g;var y=K(i);te(y,()=>e.children),X(i),bt(i,(d,h)=>St?.(d,h),()=>c),ee(d=>{p=ke(i,1,"item svelte-65plo",null,p,{ssr:!1}),g=ye(i,"",g,d)},[()=>({transform:f(e.scroll,t().blockSize)})]),b(r,i),H(),s()}async function Pt(r){const e=await fetch(r,{headers:{"x-sveltekit-pathname":location.pathname,"x-sveltekit-search":location.search}});if(!e.ok)throw new de(500,"Failed to execute remote function");const t=await e.json();if(t.type==="redirect")throw await ht(t.location),new gt(307,t.location);if(t.type==="error")throw new de(t.status??500,t.error);return t.result}function It(r,e){return t=>{const a=dt(t,B.hooks.transport),s=vt(r,a);let n=x.get(s),c=!0;try{Ge(()=>(n&&n.count++,()=>{const f=x.get(s);f&&(f.count--,ce().then(()=>{!f.count&&f===x.get(s)&&(x.delete(s),delete Q[s])}))}))}catch{c=!1}let u=n?.resource;return u||(u=e(s,a),Object.defineProperty(u,"_key",{value:s}),x.set(s,n={count:c?1:0,resource:u}),u.then(()=>{ce().then(()=>{!n.count&&n===x.get(s)&&x.delete(s)})}).catch(()=>{x.delete(s)})),u}}const _e=`sveltekit:${mt}`;let q;const At=(async()=>{if(typeof caches<"u")try{q=await caches.open(_e);const r=await caches.keys();for(const e of r)e.startsWith("sveltekit:")&&e!==_e&&await caches.delete(e)}catch(r){console.warn("Failed to initialize SvelteKit cache:",r)}})();class qt{#e;#t=A(!0);#r=A(!1);#s=A();#a=A(void 0);constructor(e){this.#e=e().then(t=>(j(this.#t,!1),j(this.#r,!0),j(this.#s,t),t),t=>{throw j(this.#t,!1),j(this.#a,t),t})}then(e,t){return this.#e.then(e,t)}catch(e){return this.#e.catch(e)}finally(e){return this.#e.finally(e)}get current(){return o(this.#s)}get error(){return o(this.#a)}get loading(){return o(this.#t)}get ready(){return o(this.#r)}}function ge(r,e){return q.put(r,new Response(e,{headers:{"Content-Type":"application/json"}})).catch(()=>{})}function Et(r){return It(r,(e,t)=>new qt(async()=>{await At;const a=`${ut}/${ft}/remote/${r}${t?`/${t}`:""}`;if(Object.hasOwn(Q,e)){const n=Q[e];return q&&ge(a,pt(n,B.encoders)),n}if(q)try{const n=await q.match(a);if(n){const c=await n.text();return fe(c,B.decoders)}}catch{}const s=await Pt(a);return q&&ge(a,s),fe(s,B.decoders)}))}const Ot=Et("1fvl9k3/fetchProject");var Nt=V('<!> <div><!> <!></div> <div class="previous svelte-1l59ohf"><!></div>',1);function Tt(r,e){F(e,!0);const t=n(st.params.project??""),a=le({});let s=A(le(t));function n(l){return e.teasers.findIndex(_=>_.slug===l)}function c(l){const _=n(l);return a[_]||(a[_]=Ot(l)),a[_]}function u(l){const{slug:_}=e.teasers[l],S=`/projects/${_}`;window.location.pathname!==S&&_t(rt("/projects/[project]",{project:_}),{scroll:l})}function f(l){return{content:"",released:l.released,slug:l.slug,title:l.title}}let i=w(()=>Math.round(o(s))),p=w(()=>e.teasers[o(i)-1]),g=w(()=>e.teasers[o(i)]),y=w(()=>e.teasers[o(i)+1]);D(()=>{o(g)&&c(o(g).slug)}),D(()=>{o(y)&&c(o(y).slug)}),D(()=>{o(p)&&c(o(p).slug)});let d=w(()=>[o(i)-1,o(i),o(i)+1].filter(l=>l>=0&&l<e.teasers.length&&l!==t));D(()=>{u(o(i))});var h=Nt(),m=P(h);zt(m,{get max(){return e.teasers.length},get value(){return o(s)},set value(l){j(s,l,!0)}});var v=R(m,2);let z;var k=K(v);tt(k,16,()=>o(d),l=>l,(l,_)=>{{let S=w(()=>o(s)-_);pe(l,{get scroll(){return o(S)},children:(se,U)=>{var N=E(),je=P(N);wt(je,()=>a[_],W=>{{let T=w(()=>f(e.teasers[_]));Z(W,{get project(){return o(T)}})}},(W,T)=>{var ae=E(),Pe=P(ae);{var Ie=I=>{Z(I,{get project(){return o(T)}})},Ae=I=>{{let qe=w(()=>f(e.teasers[_]));Z(I,{get project(){return o(qe)}})}};J(Pe,I=>{o(T)?I(Ie):I(Ae,!1)})}b(W,ae)}),b(se,N)},$$slots:{default:!0}})}});var M=R(k,2);{var ze=l=>{{let _=w(()=>o(s)-t);pe(l,{get scroll(){return o(_)},children:(S,se)=>{var U=E(),N=P(U);te(N,()=>e.children),b(S,U)},$$slots:{default:!0}})}};J(M,l=>{t>o(i)-2&&t<o(i)+2&&l(ze)})}X(v);var O=R(v,2);O.__mousedown=()=>{nt.set("right")};var Se=K(O);ot(Se,{href:"/portfolio",type:"previous",children:(l,_)=>{Ke();var S=Oe("Portfolio");b(l,S)},$$slots:{default:!0}}),X(O),ee(()=>z=ke(v,1,"viewport svelte-1l59ohf",null,z,{ssr:!1})),L(5,v,()=>it,()=>({})),L(6,v,()=>ct,()=>({})),L(6,O,()=>lt,()=>({duration:200})),b(r,h),H()}et(["mousedown"]);function Jt(r,e){F(e,!0),Tt(r,{get teasers(){return e.data.teasers},children:(t,a)=>{var s=E(),n=P(s);te(n,()=>e.children??Xe),b(t,s)},$$slots:{default:!0}}),H()}export{Jt as component};
