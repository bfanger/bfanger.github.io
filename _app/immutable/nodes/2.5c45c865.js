import{i as ae,f as ue,h as q,j as fe,s as O,n as w,o as _e,c as N,k as de,u as R,g as Y,d as L,e as ne,b as me,l as pe}from"../chunks/scheduler.ca2a2e1b.js";import{p as P,t as b,b as B,d as g,S as V,i as A,g as T,h as U,j as F,f as v,k as G,l as D,a as y,x as he,y as ge,r as j,s as K,u as S,c as Q,v as z,z as be,w as I,e as E}from"../chunks/index.338fa73d.js";import{e as W,u as $e,o as ke}from"../chunks/each.6e297198.js";import{p as ve}from"../chunks/stores.5905f457.js";import{g as we}from"../chunks/globals.7f7f1b26.js";import{w as se}from"../chunks/index.03dc27fb.js";import{P as J}from"../chunks/ProjectCard.1e7b1c8e.js";function X(l,e){const s=e.token={};function t(r,n,o,i){if(e.token!==s)return;e.resolved=i;let c=e.ctx;o!==void 0&&(c=c.slice(),c[o]=i);const _=r&&(e.current=r)(c);let d=!1;e.block&&(e.blocks?e.blocks.forEach((h,k)=>{k!==n&&h&&(P(),b(h,1,1,()=>{e.blocks[k]===h&&(e.blocks[k]=null)}),B())}):e.block.d(1),_.c(),g(_,1),_.m(e.mount(),e.anchor),d=!0),e.block=_,e.blocks&&(e.blocks[n]=_),d&&fe()}if(ae(l)){const r=ue();if(l.then(n=>{q(r),t(e.then,1,e.value,n),q(null)},n=>{if(q(r),t(e.catch,2,e.error,n),q(null),!e.hasCatch)throw n}),e.current!==e.pending)return t(e.pending,0),!0}else{if(e.current!==e.then)return t(e.then,1,e.value,l),!0;e.resolved=l}}function ye(l,e,s){const t=e.slice(),{resolved:r}=l;l.current===l.then&&(t[l.value]=r),l.current===l.catch&&(t[l.error]=r),l.block.p(t,s)}const{window:je}=we;function Se(l){let e,s=`${l[0]*100}vh`,t,r;return{c(){e=T("div"),this.h()},l(n){e=U(n,"DIV",{class:!0}),F(e).forEach(v),this.h()},h(){G(e,"class","scroller"),D(e,"height",s)},m(n,o){y(n,e,o),t||(r=he(je,"scroll",l[1]),t=!0)},p(n,[o]){o&1&&s!==(s=`${n[0]*100}vh`)&&D(e,"height",s)},i:w,o:w,d(n){n&&v(e),t=!1,r()}}}function ze(l,e,s){let t,{max:r}=e,{value:n}=e;n!==0&&_e(()=>{window.scrollTo(0,document.body.scrollHeight*(n/t))});function o(){const i=window.scrollY/(document.body.offsetHeight-window.innerHeight);s(2,n=i*t)}return l.$$set=i=>{"max"in i&&s(3,r=i.max),"value"in i&&s(2,n=i.value)},l.$$.update=()=>{l.$$.dirty&8&&s(0,t=r)},[t,o,n,r]}class Ie extends V{constructor(e){super(),A(this,e,ze,Se,O,{max:3,value:2})}}function Ce(l,e){let s=Z(e),t,r,n=!0;function o({box:c}){t=new ResizeObserver(([_])=>{let d;c==="border-box"?d=_.borderBoxSize:c==="device-pixel-content-box"?d=_.devicePixelContentBoxSize:d=_.contentBoxSize,s.set(Array.isArray(d)?d[0]:d),n=!1}),t.observe(l,{box:c}),r=s.subscribe(_=>{n||l.dispatchEvent(new CustomEvent("has-resized",{detail:_}))})}function i(){t.disconnect(),r()}return o(x(e)),{update(c){n=!0,s=Z(c),i(),o(x(c))},destroy(){i()}}}function Z(l){if(typeof l=="object"){if(l.subscribe)return l;if(l.store)return l.store}return se({inlineSize:0,blockSize:0})}function x(l){if(typeof l>"u"||l.subscribe)return{};const{store:e,...s}=l;return s}function Ee(l){let e,s,t,r;const n=l[4].default,o=N(n,l,l[3],null);return{c(){e=T("div"),o&&o.c(),this.h()},l(i){e=U(i,"DIV",{class:!0});var c=F(e);o&&o.l(c),c.forEach(v),this.h()},h(){G(e,"class","item svelte-qqcwqq"),D(e,"transform",ee(l[0],l[1].blockSize))},m(i,c){y(i,e,c),o&&o.m(e,null),s=!0,t||(r=de(Ce.call(null,e,l[2])),t=!0)},p(i,[c]){o&&o.p&&(!s||c&8)&&R(o,n,i,i[3],s?L(n,i[3],c,null):Y(i[3]),null),c&3&&D(e,"transform",ee(i[0],i[1].blockSize))},i(i){s||(g(o,i),s=!0)},o(i){b(o,i),s=!1},d(i){i&&v(e),o&&o.d(i),t=!1,r()}}}const qe=16;function Pe(l,e){const s=window.innerHeight,t=s/2;if(l>1)return-e;if(l<-1)return s;if(l>.5){const n=(l-.5)*2;return-e+t-t*n}if(l<-.5){const n=(l+1.5)*2-1;return s-t*n}const r=l+.5;return t-e*r}function ee(l,e){if(e===0)return"";let s=1;if(l>.75&&l<1){const t=(l-.75)*4;s=1-t*t*.2}if(l<-.5&&l>-1){const t=(l+.5)*-2;s=1-t*t*.3}return`translateY(${Pe(l,e+qe)}px) scale(${s})`}function Be(l,e,s){let t,{$$slots:r={},$$scope:n}=e,{scroll:o}=e;const i=se({inlineSize:0,blockSize:0});return ne(l,i,c=>s(1,t=c)),l.$$set=c=>{"scroll"in c&&s(0,o=c.scroll),"$$scope"in c&&s(3,n=c.$$scope)},[o,t,i,n,r]}class oe extends V{constructor(e){super(),A(this,e,Be,Ee,O,{scroll:0})}}function te(l,e,s){const t=l.slice();return t[16]=e[s],t}function De(l){return{c:w,l:w,m:w,p:w,i:w,o:w,d:w}}function Me(l){let e,s,t,r;const n=[Ve,Oe],o=[];function i(c,_){return c[19]?0:1}return e=i(l),s=o[e]=n[e](l),{c(){s.c(),t=E()},l(c){s.l(c),t=E()},m(c,_){o[e].m(c,_),y(c,t,_),r=!0},p(c,_){let d=e;e=i(c),e===d?o[e].p(c,_):(P(),b(o[d],1,1,()=>{o[d]=null}),B(),s=o[e],s?s.p(c,_):(s=o[e]=n[e](c),s.c()),g(s,1),s.m(t.parentNode,t))},i(c){r||(g(s),r=!0)},o(c){b(s),r=!1},d(c){c&&v(t),o[e].d(c)}}}function Oe(l){let e,s;return e=new J({props:{project:M(l[0][l[16]])}}),{c(){j(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,r){z(e,t,r),s=!0},p(t,r){const n={};r&17&&(n.project=M(t[0][t[16]])),e.$set(n)},i(t){s||(g(e.$$.fragment,t),s=!0)},o(t){b(e.$$.fragment,t),s=!1},d(t){I(e,t)}}}function Ve(l){let e,s;return e=new J({props:{project:l[19]}}),{c(){j(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,r){z(e,t,r),s=!0},p(t,r){const n={};r&24&&(n.project=t[19]),e.$set(n)},i(t){s||(g(e.$$.fragment,t),s=!0)},o(t){b(e.$$.fragment,t),s=!1},d(t){I(e,t)}}}function Ae(l){let e,s;return e=new J({props:{project:M(l[0][l[16]])}}),{c(){j(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,r){z(e,t,r),s=!0},p(t,r){const n={};r&17&&(n.project=M(t[0][t[16]])),e.$set(n)},i(t){s||(g(e.$$.fragment,t),s=!0)},o(t){b(e.$$.fragment,t),s=!1},d(t){I(e,t)}}}function He(l){let e,s,t,r={ctx:l,current:null,token:null,hasCatch:!1,pending:Ae,then:Me,catch:De,value:19,blocks:[,,,]};return X(s=l[3][l[16]],r),{c(){e=E(),r.block.c()},l(n){e=E(),r.block.l(n)},m(n,o){y(n,e,o),r.block.m(n,r.anchor=o),r.mount=()=>e.parentNode,r.anchor=e,t=!0},p(n,o){l=n,r.ctx=l,o&24&&s!==(s=l[3][l[16]])&&X(s,r)||ye(r,l,o)},i(n){t||(g(r.block),t=!0)},o(n){for(let o=0;o<3;o+=1){const i=r.blocks[o];b(i)}t=!1},d(n){n&&v(e),r.block.d(n),r.token=null,r=null}}}function le(l,e){let s,t,r;return t=new oe({props:{scroll:e[1]-e[16],$$slots:{default:[He]},$$scope:{ctx:e}}}),{key:l,first:null,c(){s=E(),j(t.$$.fragment),this.h()},l(n){s=E(),S(t.$$.fragment,n),this.h()},h(){this.first=s},m(n,o){y(n,s,o),z(t,n,o),r=!0},p(n,o){e=n;const i={};o&18&&(i.scroll=e[1]-e[16]),o&2073&&(i.$$scope={dirty:o,ctx:e}),t.$set(i)},i(n){r||(g(t.$$.fragment,n),r=!0)},o(n){b(t.$$.fragment,n),r=!1},d(n){n&&v(s),I(t,n)}}}function re(l){let e,s;return e=new oe({props:{scroll:l[1]-l[5],$$slots:{default:[Ne]},$$scope:{ctx:l}}}),{c(){j(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,r){z(e,t,r),s=!0},p(t,r){const n={};r&2&&(n.scroll=t[1]-t[5]),r&2048&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){s||(g(e.$$.fragment,t),s=!0)},o(t){b(e.$$.fragment,t),s=!1},d(t){I(e,t)}}}function Ne(l){let e;const s=l[9].default,t=N(s,l,l[11],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,n){t&&t.m(r,n),e=!0},p(r,n){t&&t.p&&(!e||n&2048)&&R(t,s,r,r[11],e?L(s,r[11],n,null):Y(r[11]),null)},i(r){e||(g(t,r),e=!0)},o(r){b(t,r),e=!1},d(r){t&&t.d(r)}}}function Re(l){let e,s,t,r,n=[],o=new Map,i,c;function _(a){l[10](a)}let d={max:l[0].length-1};l[1]!==void 0&&(d.value=l[1]),e=new Ie({props:d}),me.push(()=>ge(e,"value",_));let h=W(l[4]);const k=a=>a[16];for(let a=0;a<h.length;a+=1){let u=te(l,h,a),m=k(u);o.set(m,n[a]=le(m,u))}let f=l[5]>l[2]-2&&l[5]<l[2]+2&&re(l);return{c(){j(e.$$.fragment),t=K(),r=T("div");for(let a=0;a<n.length;a+=1)n[a].c();i=K(),f&&f.c(),this.h()},l(a){S(e.$$.fragment,a),t=Q(a),r=U(a,"DIV",{class:!0});var u=F(r);for(let m=0;m<n.length;m+=1)n[m].l(u);i=Q(u),f&&f.l(u),u.forEach(v),this.h()},h(){G(r,"class","viewport svelte-1nlphxj")},m(a,u){z(e,a,u),y(a,t,u),y(a,r,u);for(let m=0;m<n.length;m+=1)n[m]&&n[m].m(r,null);be(r,i),f&&f.m(r,null),c=!0},p(a,[u]){const m={};u&1&&(m.max=a[0].length-1),!s&&u&2&&(s=!0,m.value=a[1],pe(()=>s=!1)),e.$set(m),u&27&&(h=W(a[4]),P(),n=$e(n,u,k,1,a,h,o,r,ke,le,i,te),B()),a[5]>a[2]-2&&a[5]<a[2]+2?f?(f.p(a,u),u&4&&g(f,1)):(f=re(a),f.c(),g(f,1),f.m(r,null)):f&&(P(),b(f,1,1,()=>{f=null}),B())},i(a){if(!c){g(e.$$.fragment,a);for(let u=0;u<h.length;u+=1)g(n[u]);g(f),c=!0}},o(a){b(e.$$.fragment,a);for(let u=0;u<n.length;u+=1)b(n[u]);b(f),c=!1},d(a){a&&(v(t),v(r)),I(e,a);for(let u=0;u<n.length;u+=1)n[u].d();f&&f.d()}}}function M(l){return{content:"",released:l.released,slug:l.slug,title:l.title}}function Ye(l,e,s){let t,r,n,o,i,c;ne(l,ve,p=>s(12,c=p));let{$$slots:_={},$$scope:d}=e,{teasers:h}=e;const k=u(c.params.project),f={};let a=k;function u(p){return h.findIndex($=>$.slug===p)}function m(p){const $=u(p);return f[$]||s(3,f[$]=fetch(`/projects/${p}.json`).then(C=>C.json()),f),f[$]}function ce(p){const{slug:$}=h[p],C=`/scrollytelling/${$}`;window.location.pathname!==C&&window.history.pushState({scroll:p},"",`/scrollytelling/${$}`)}function ie(p){a=p,s(1,a)}return l.$$set=p=>{"teasers"in p&&s(0,h=p.teasers),"$$scope"in p&&s(11,d=p.$$scope)},l.$$.update=()=>{var p,$,C;l.$$.dirty&2&&s(2,t=Math.round(a)),l.$$.dirty&5&&s(8,r=(p=h[t-1])==null?void 0:p.slug),l.$$.dirty&5&&s(7,n=($=h[t])==null?void 0:$.slug),l.$$.dirty&5&&s(6,o=(C=h[t+1])==null?void 0:C.slug),l.$$.dirty&256&&r&&m(r),l.$$.dirty&128&&n&&m(n),l.$$.dirty&64&&o&&m(o),l.$$.dirty&5&&s(4,i=[t-1,t,t+1].filter(H=>H>=0&&H<h.length&&H!==k)),l.$$.dirty&4&&ce(t)},[h,a,t,f,i,k,o,n,r,_,ie,d]}class Le extends V{constructor(e){super(),A(this,e,Ye,Re,O,{teasers:0})}}function Te(l){let e;const s=l[1].default,t=N(s,l,l[2],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,n){t&&t.m(r,n),e=!0},p(r,n){t&&t.p&&(!e||n&4)&&R(t,s,r,r[2],e?L(s,r[2],n,null):Y(r[2]),null)},i(r){e||(g(t,r),e=!0)},o(r){b(t,r),e=!1},d(r){t&&t.d(r)}}}function Ue(l){let e,s;return e=new Le({props:{teasers:l[0].teasers,$$slots:{default:[Te]},$$scope:{ctx:l}}}),{c(){j(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,r){z(e,t,r),s=!0},p(t,[r]){const n={};r&1&&(n.teasers=t[0].teasers),r&4&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){s||(g(e.$$.fragment,t),s=!0)},o(t){b(e.$$.fragment,t),s=!1},d(t){I(e,t)}}}function Fe(l,e,s){let{$$slots:t={},$$scope:r}=e,{data:n}=e;return l.$$set=o=>{"data"in o&&s(0,n=o.data),"$$scope"in o&&s(2,r=o.$$scope)},[n,t,r]}class xe extends V{constructor(e){super(),A(this,e,Fe,Ue,O,{data:0})}}export{xe as component};
