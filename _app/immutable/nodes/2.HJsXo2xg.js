import{B as we,f as U,a as x,t as ze,c as N}from"../chunks/CAg0ZyGv.js";import{h as P,d as xe,b as ye,b0 as $,H as Se,k as je,j as ke,l as R,R as Ie,S as C,z as J,b1 as Ae,aC as Pe,b2 as qe,b3 as Ne,al as Be,ai as De,a2 as ne,Z as ie,aA as Ee,b4 as Oe,_ as Te,p as D,f as j,t as oe,a as E,g as a,a8 as le,a$ as K,s as B,a9 as ce,c as Y,r as L,ap as Q,X as q,u as w,aq as Re,n as Ce}from"../chunks/DrfILjJG.js";import{s as W}from"../chunks/B5mdmElG.js";import{p as Me,f as V,g as Fe,j as He,d as Ye}from"../chunks/Cs29mKmA.js";import{i as ee}from"../chunks/BTif1B6A.js";import{e as Le}from"../chunks/BklWPKWu.js";import{t as M}from"../chunks/Cshrk9Xc.js";import{p as Ue}from"../chunks/DlmC6uED.js";import{P as F}from"../chunks/DTZDYAQB.js";import{o as We}from"../chunks/BjTyozP6.js";import{a as ue}from"../chunks/CTPX2zIG.js";import{w as de}from"../chunks/BgNYpTDD.js";import{c as Ze,N as Ge,b as Xe,d as $e,a as Je}from"../chunks/D68hce_j.js";const te=0,H=1;function Ke(s,e,t,r,i){P&&xe();var f=De,u=J(f),v=J(f),d=new we(s);ye(()=>{var n=e(),g=!1;let p=P&&$(n)===(s.data===Se);if(p&&(je(ke()),R(!1)),$(n)){var o=Ae(),b=!1;const m=c=>{if(!g){b=!0,o(!1),Pe.ensure(),P&&R(!1);try{c()}finally{qe(),Ne||Be()}}};n.then(c=>{m(()=>{C(u,c),d.ensure(H,r&&(_=>r(_,u)))})},c=>{m(()=>{if(C(v,c),d.ensure(H,i&&(_=>i(_,v))),!i)throw v.v})}),P?d.ensure(te,t):Ie(()=>{b||m(()=>{d.ensure(te,t)})})}else C(u,n),d.ensure(H,r&&(m=>r(m,u)));return p&&R(!0),()=>{g=!0}})}function Qe(s,e,t){ne(()=>{var r=ie(()=>e(s,t?.())||{});if(t&&r?.update){var i=!1,f={};Ee(()=>{var u=t();Oe(u),i&&Te(f,u)&&(f=u,r.update(u))}),i=!0}if(r?.destroy)return()=>r.destroy()})}class Z{#e=new WeakMap;#t;#r;static entries=new WeakMap;constructor(e){this.#r=e}observe(e,t){var r=this.#e.get(e)||new Set;return r.add(t),this.#e.set(e,r),this.#s().observe(e,this.#r),()=>{var i=this.#e.get(e);i.delete(t),i.size===0&&(this.#e.delete(e),this.#t.unobserve(e))}}#s(){return this.#t??(this.#t=new ResizeObserver(e=>{for(var t of e){Z.entries.set(t.target,t);for(var r of this.#e.get(t.target)||[])r(t)}}))}}var Ve=new Z({box:"border-box"});function et(s,e,t){var r=Ve.observe(s,()=>t(s[e]));ne(()=>(ie(()=>t(s[e])),r))}var tt=U('<div class="scroller svelte-142q3nm"></div> <div class="size svelte-142q3nm"></div>',1);function rt(s,e){D(e,!0);let t=Me(e,"value",15),r=le(0);t()!==0&&We(()=>{window.scrollTo(0,a(r)*t())});function i(){const c=window.scrollY/(a(r)*e.max);t(c*e.max)}let f=Date.now(),u=t(),v;function d(){i(),u!==t()?(f=Date.now(),u=t(),v=requestAnimationFrame(d)):Date.now()-f<1e3?v=requestAnimationFrame(d):v=void 0}function n(){f=Date.now(),i(),v||(v=requestAnimationFrame(d))}function g(){i(),v&&(cancelAnimationFrame(v),v=void 0)}var p=tt();V("scroll",K,n),V("scrollend",K,g);var o=j(p);let b;var m=B(o,2);oe(()=>b=ue(o,"",b,{height:`${e.max*100}svh`})),et(m,"clientHeight",c=>ce(r,c)),x(s,p),E()}function st(s,e){let t=re(e),r,i,f=!0;function u({box:d}){r=new ResizeObserver(([n])=>{let g;d==="border-box"?g=n.borderBoxSize:d==="device-pixel-content-box"?g=n.devicePixelContentBoxSize:g=n.contentBoxSize,t.set(Array.isArray(g)?g[0]:g),f=!1}),r.observe(s,{box:d}),i=t.subscribe(n=>{f||s.dispatchEvent(new CustomEvent("has-resized",{detail:n}))})}function v(){r.disconnect(),i()}return u(se(e)),{update(d){f=!0,t=re(d),v(),u(se(d))},destroy(){v()}}}function re(s){if(typeof s=="object"){if(s.subscribe)return s;if(s.store)return s.store}return de({inlineSize:0,blockSize:0})}function se(s){if(typeof s>"u"||s.subscribe)return{};const{store:e,...t}=s;return t}var at=U('<div class="item svelte-1g87s5s"><!></div>');function ae(s,e){D(e,!0);const t=()=>Fe(u,"$size",r),[r,i]=He(),f=16,u=de({inlineSize:0,blockSize:0});function v(o,b){const m=window.innerHeight,c=m/2;if(o>1)return-b;if(o<-1)return m;if(o>.5){const y=(o-.5)*2;return-b+c-c*y}if(o<-.5){const y=(o+1.5)*2-1;return m-c*y}const _=o+.5;return c-b*_}function d(o,b){if(b===0)return"";let m=1;if(o>.75&&o<1){const c=(o-.75)*4;m=1-c*c*.2}if(o<-.5&&o>-1){const c=(o+.5)*-2;m=1-c*c*.3}return`translateY(${v(o,b+f)}px) scale(${m})`}var n=at();let g;var p=Y(n);W(p,()=>e.children),L(n),Qe(n,(o,b)=>st?.(o,b),()=>u),oe(o=>g=ue(n,"",g,o),[()=>({transform:d(e.scroll,t().blockSize)})]),x(s,n),E(),i()}var nt=U('<!> <div class="viewport svelte-105t3g3"><!> <!></div> <div class="previous svelte-105t3g3"><!></div>',1);function it(s,e){D(e,!0);const t=f(Ue.params.project??""),r=Q({});let i=le(Q(t));function f(l){return e.teasers.findIndex(h=>h.slug===l)}function u(l){const h=f(l);return r[h]||(r[h]=fetch(`/projects/${l}.json`).then(z=>z.json())),r[h]}function v(l){const{slug:h}=e.teasers[l],z=`/projects/${h}`;window.location.pathname!==z&&window.history.replaceState({scroll:l},"",`/projects/${h}`)}function d(l){return{content:"",released:l.released,slug:l.slug,title:l.title}}let n=w(()=>Math.round(a(i))),g=w(()=>e.teasers[a(n)-1]?.slug),p=w(()=>e.teasers[a(n)]?.slug),o=w(()=>e.teasers[a(n)+1]?.slug);q(()=>{a(g)&&u(a(g))}),q(()=>{a(p)&&u(a(p))}),q(()=>{a(o)&&u(a(o))});let b=w(()=>[a(n)-1,a(n),a(n)+1].filter(l=>l>=0&&l<e.teasers.length&&l!==t));q(()=>{v(a(n))});var m=nt(),c=j(m);{let l=w(()=>e.teasers.length-1);rt(c,{get max(){return a(l)},get value(){return a(i)},set value(h){ce(i,h,!0)}})}var _=B(c,2),y=Y(_);Le(y,16,()=>a(b),l=>l,(l,h)=>{{let z=w(()=>a(i)-h);ae(l,{get scroll(){return a(z)},children:(G,O)=>{var I=N(),he=j(I);Ke(he,()=>r[h],T=>{{let A=w(()=>d(e.teasers[h]));F(T,{get project(){return a(A)}})}},(T,A)=>{var X=N(),ge=j(X);{var be=S=>{F(S,{get project(){return a(A)}})},_e=S=>{{let pe=w(()=>d(e.teasers[h]));F(S,{get project(){return a(pe)}})}};ee(ge,S=>{a(A)?S(be):S(_e,!1)})}x(T,X)}),x(G,I)},$$slots:{default:!0}})}});var fe=B(y,2);{var ve=l=>{{let h=w(()=>a(i)-t);ae(l,{get scroll(){return a(h)},children:(z,G)=>{var O=N(),I=j(O);W(I,()=>e.children),x(z,O)},$$slots:{default:!0}})}};ee(fe,l=>{t>a(n)-2&&t<a(n)+2&&l(ve)})}L(_);var k=B(_,2);k.__mousedown=()=>{Ze.set("right")};var me=Y(k);Ge(me,{href:"/portfolio",type:"previous",children:(l,h)=>{Re();var z=ze("Portfolio");x(l,z)},$$slots:{default:!0}}),L(k),M(5,_,()=>Xe,()=>({})),M(6,_,()=>$e,()=>({})),M(6,k,()=>Je,()=>({duration:200})),x(s,m),E()}Ye(["mousedown"]);function wt(s,e){D(e,!0),it(s,{get teasers(){return e.data.teasers},children:(t,r)=>{var i=N(),f=j(i);W(f,()=>e.children??Ce),x(t,i)},$$slots:{default:!0}}),E()}export{wt as component};
