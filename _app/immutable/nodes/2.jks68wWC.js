import{B as we,f as U,a as z,t as ze,c as N}from"../chunks/CpQ6StF8.js";import{h as A,d as xe,b as ye,b0 as K,H as Se,k as ke,j as Ie,l as R,R as je,S as M,z as Q,b1 as Pe,az as Ae,b2 as qe,b3 as Ne,al as Be,af as De,Z as ne,a4 as ie,ax as Ee,b4 as Oe,ah as Te,p as D,f as k,t as oe,a as E,g as a,a5 as le,a_ as V,s as B,a6 as ce,c as Y,r as L,ap as X,ai as q,u as w,aq as Re,n as Me}from"../chunks/Cp8cVCIs.js";import{s as W}from"../chunks/DwrUPnCS.js";import{p as Ce,g as $,f as Fe,j as He,d as Ye}from"../chunks/CefZslv3.js";import{i as ee}from"../chunks/q9E2D1IV.js";import{e as Le}from"../chunks/DtPMHeiP.js";import{t as C}from"../chunks/D3s75-Ta.js";import{p as Ue}from"../chunks/BTeHTYCf.js";import{f as We,P as F}from"../chunks/JMgBf0Z2.js";import{o as Ze,w as ue}from"../chunks/Dem3nozl.js";import{a as de}from"../chunks/O3lC0wZU.js";import{c as Ge,N as Je,b as Ke,d as Qe,a as Ve}from"../chunks/CtVMZczI.js";const te=0,H=1;function Xe(s,e,t,r,i){A&&xe();var f=De,u=Q(f),v=Q(f),d=new we(s);ye(()=>{var n=e(),g=!1;let p=A&&K(n)===(s.data===Se);if(p&&(ke(Ie()),R(!1)),K(n)){var o=Pe(),b=!1;const m=c=>{if(!g){b=!0,o(!1),Ae.ensure(),A&&R(!1);try{c()}finally{qe(),Ne||Be()}}};n.then(c=>{m(()=>{M(u,c),d.ensure(H,r&&(_=>r(_,u)))})},c=>{m(()=>{if(M(v,c),d.ensure(H,i&&(_=>i(_,v))),!i)throw v.v})}),A?d.ensure(te,t):je(()=>{b||m(()=>{d.ensure(te,t)})})}else M(u,n),d.ensure(H,r&&(m=>r(m,u)));return p&&R(!0),()=>{g=!0}})}function $e(s,e,t){ne(()=>{var r=ie(()=>e(s,t?.())||{});if(t&&r?.update){var i=!1,f={};Ee(()=>{var u=t();Oe(u),i&&Te(f,u)&&(f=u,r.update(u))}),i=!0}if(r?.destroy)return()=>r.destroy()})}class Z{#e=new WeakMap;#t;#r;static entries=new WeakMap;constructor(e){this.#r=e}observe(e,t){var r=this.#e.get(e)||new Set;return r.add(t),this.#e.set(e,r),this.#s().observe(e,this.#r),()=>{var i=this.#e.get(e);i.delete(t),i.size===0&&(this.#e.delete(e),this.#t.unobserve(e))}}#s(){return this.#t??(this.#t=new ResizeObserver(e=>{for(var t of e){Z.entries.set(t.target,t);for(var r of this.#e.get(t.target)||[])r(t)}}))}}var et=new Z({box:"border-box"});function tt(s,e,t){var r=et.observe(s,()=>t(s[e]));ne(()=>(ie(()=>t(s[e])),r))}var rt=U('<div class="scroller svelte-142q3nm"></div> <div class="size svelte-142q3nm"></div>',1);function st(s,e){D(e,!0);let t=Ce(e,"value",15),r=le(0);t()!==0&&Ze(()=>{window.scrollTo(0,a(r)*t())});function i(){const c=window.scrollY/(a(r)*e.max);t(c*e.max)}let f=Date.now(),u=t(),v;function d(){i(),u!==t()?(f=Date.now(),u=t(),v=requestAnimationFrame(d)):Date.now()-f<1e3?v=requestAnimationFrame(d):v=void 0}function n(){f=Date.now(),i(),v||(v=requestAnimationFrame(d))}function g(){i(),v&&(cancelAnimationFrame(v),v=void 0)}var p=rt();$("scroll",V,n),$("scrollend",V,g);var o=k(p);let b;var m=B(o,2);oe(()=>b=de(o,"",b,{height:`${e.max*100}svh`})),tt(m,"clientHeight",c=>ce(r,c)),z(s,p),E()}function at(s,e){let t=re(e),r,i,f=!0;function u({box:d}){r=new ResizeObserver(([n])=>{let g;d==="border-box"?g=n.borderBoxSize:d==="device-pixel-content-box"?g=n.devicePixelContentBoxSize:g=n.contentBoxSize,t.set(Array.isArray(g)?g[0]:g),f=!1}),r.observe(s,{box:d}),i=t.subscribe(n=>{f||s.dispatchEvent(new CustomEvent("has-resized",{detail:n}))})}function v(){r.disconnect(),i()}return u(se(e)),{update(d){f=!0,t=re(d),v(),u(se(d))},destroy(){v()}}}function re(s){if(typeof s=="object"){if(s.subscribe)return s;if(s.store)return s.store}return ue({inlineSize:0,blockSize:0})}function se(s){if(typeof s>"u"||s.subscribe)return{};const{store:e,...t}=s;return t}var nt=U('<div class="item svelte-1g87s5s"><!></div>');function ae(s,e){D(e,!0);const t=()=>Fe(u,"$size",r),[r,i]=He(),f=16,u=ue({inlineSize:0,blockSize:0});function v(o,b){const m=window.innerHeight,c=m/2;if(o>1)return-b;if(o<-1)return m;if(o>.5){const y=(o-.5)*2;return-b+c-c*y}if(o<-.5){const y=(o+1.5)*2-1;return m-c*y}const _=o+.5;return c-b*_}function d(o,b){if(b===0)return"";let m=1;if(o>.75&&o<1){const c=(o-.75)*4;m=1-c*c*.2}if(o<-.5&&o>-1){const c=(o+.5)*-2;m=1-c*c*.3}return`translateY(${v(o,b+f)}px) scale(${m})`}var n=nt();let g;var p=Y(n);W(p,()=>e.children),L(n),$e(n,(o,b)=>at?.(o,b),()=>u),oe(o=>g=de(n,"",g,o),[()=>({transform:d(e.scroll,t().blockSize)})]),z(s,n),E(),i()}var it=U('<!> <div class="viewport svelte-105t3g3"><!> <!></div> <div class="previous svelte-105t3g3"><!></div>',1);function ot(s,e){D(e,!0);const t=f(Ue.params.project??""),r=X({});let i=le(X(t));function f(l){return e.teasers.findIndex(h=>h.slug===l)}function u(l){const h=f(l);return r[h]||(r[h]=We(l)),r[h]}function v(l){const{slug:h}=e.teasers[l],x=`/projects/${h}`;window.location.pathname!==x&&window.history.replaceState({scroll:l},"",`/projects/${h}`)}function d(l){return{content:"",released:l.released,slug:l.slug,title:l.title}}let n=w(()=>Math.round(a(i))),g=w(()=>e.teasers[a(n)-1]?.slug),p=w(()=>e.teasers[a(n)]?.slug),o=w(()=>e.teasers[a(n)+1]?.slug);q(()=>{a(g)&&u(a(g))}),q(()=>{a(p)&&u(a(p))}),q(()=>{a(o)&&u(a(o))});let b=w(()=>[a(n)-1,a(n),a(n)+1].filter(l=>l>=0&&l<e.teasers.length&&l!==t));q(()=>{v(a(n))});var m=it(),c=k(m);{let l=w(()=>e.teasers.length-1);st(c,{get max(){return a(l)},get value(){return a(i)},set value(h){ce(i,h,!0)}})}var _=B(c,2),y=Y(_);Le(y,16,()=>a(b),l=>l,(l,h)=>{{let x=w(()=>a(i)-h);ae(l,{get scroll(){return a(x)},children:(G,O)=>{var j=N(),he=k(j);Xe(he,()=>r[h],T=>{{let P=w(()=>d(e.teasers[h]));F(T,{get project(){return a(P)}})}},(T,P)=>{var J=N(),ge=k(J);{var be=S=>{F(S,{get project(){return a(P)}})},_e=S=>{{let pe=w(()=>d(e.teasers[h]));F(S,{get project(){return a(pe)}})}};ee(ge,S=>{a(P)?S(be):S(_e,!1)})}z(T,J)}),z(G,j)},$$slots:{default:!0}})}});var fe=B(y,2);{var ve=l=>{{let h=w(()=>a(i)-t);ae(l,{get scroll(){return a(h)},children:(x,G)=>{var O=N(),j=k(O);W(j,()=>e.children),z(x,O)},$$slots:{default:!0}})}};ee(fe,l=>{t>a(n)-2&&t<a(n)+2&&l(ve)})}L(_);var I=B(_,2);I.__mousedown=()=>{Ge.set("right")};var me=Y(I);Je(me,{href:"/portfolio",type:"previous",children:(l,h)=>{Re();var x=ze("Portfolio");z(l,x)},$$slots:{default:!0}}),L(I),C(5,_,()=>Ke,()=>({})),C(6,_,()=>Qe,()=>({})),C(6,I,()=>Ve,()=>({duration:200})),z(s,m),E()}Ye(["mousedown"]);function wt(s,e){D(e,!0),ot(s,{get teasers(){return e.data.teasers},children:(t,r)=>{var i=N(),f=k(i);W(f,()=>e.children??Me),z(t,i)},$$slots:{default:!0}}),E()}export{wt as component};
